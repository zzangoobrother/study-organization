# 팩토리 패턴
객체를 사용하는 코드에서 객체 생성 부분을 떼어내 상위 클래스가 중요한 뼈대를 결정, 하위 클래스에서 객체 생성에 관한 구체적인 내용을 결정
느슨한 결합을 가지며 상위 클래스에서는 인스턴스 생성에 대해 전혀 알 필요가 없기에 유연성을 갖고, 리팩터링하더라도 한 곳만 고칠 수 있게 되니
유지 보수성이 증가

### 심플 팩토리 패턴
객체를 생성하는 클래스를 따로 만든다.

````java
public interface Coffee {
    int getPrice();
}
````

````java
public class Americano implements Coffee {
    private int price;

    public Americano(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}
````

````java
public class Latte implements Coffee {
    private int price;

    public Latte(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}
````

````java
public class CoffeeFactory {
    public static Coffee getCoffee(String type, int price) {
        if ("Latte".equalsIgnoreCase(type)) {
            return new Latte(price);
        } else if ("Americano".equalsIgnoreCase(type)) {
            return new Americano(price);
        }

        return null;
    }
}
````

````java
public class CoffeeWorld {

    public static void main(String[] args) {
        Coffee latte = CoffeeFactory.getCoffee("Latte", 4000);
        Coffee americano = CoffeeFactory.getCoffee("Americano", 3000);

        System.out.println("latte price : " + latte.getPrice());
        System.out.println("americano price : " + americano.getPrice());
    }
}
````

### 팩토리 메소드 패턴
어떤 클래스의 인스턴스를 만들지를 서브클래스에서 결정

````java
public interface Coffee {
    int getPrice();
}
````

````java
public class Americano implements Coffee {
    private int price;

    public Americano(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}
````

````java
public class Latte implements Coffee {
    private int price;

    public Latte(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}
````

````java
public interface CoffeeFactory {
    default Coffee getCoffee(int price) {
        return createCoffee(price);
    }

    Coffee createCoffee(int price);
}
````

````java
public class LatteCoffeeFactory implements CoffeeFactory {
    @Override
    public Coffee createCoffee(int price) {
        return new Latte(price);
    }
}
````

````java
public class AmericanoCoffeeFactory implements CoffeeFactory {
    @Override
    public Coffee createCoffee(int price) {
        return new Americano(price);
    }
}
````

````java
public class CoffeeWorld {

    public static void main(String[] args) {
        CoffeeFactory latteCoffeeFactory = new LatteCoffeeFactory();
        Coffee latte = latteCoffeeFactory.createCoffee(4000);
        System.out.println("latte price : " + latte.getPrice());

        CoffeeFactory americanoCoffeeFactory = new AmericanoCoffeeFactory();
        Coffee americano = latteCoffeeFactory.createCoffee(3000);
        System.out.println("americano price : " + americano.getPrice());
    }
}
````
